
if (Parse == null) var Parse = require('parse').Parse;

var retrieveBusiness = function (successCb, failureCb, args) {
  var BusinessObj = Parse.Object.extend('Business');
  var businessQuery = new Parse.Query(BusinessObj);

  businessQuery.equalTo('owner', Parse.User.current());
  businessQuery.first({
    success: successCb,
    error: failureCb
  })
}

var retrieveRewards = function (successCb, failureCb, args) {
  var business = args['business'];

  var RewardObj = Parse.Object.extend('Reward');
  var rewardQuery = new Parse.Query(RewardObj);

  rewardQuery.equalTo('business', business);

  rewardQuery.find({
    success: successCb,
    error: failureCb
  });
}

exports.retrieveBusiness = retrieveBusiness;
exports.retrieveRewards = retrieveRewards;